{% extends "base.html" %}

{% block content %}
  <h1 style="margin: 1.5rem 0 1.5rem 1.5rem;">
    TODO List
    <a href="{% url 'todo_app:task-create' %}" class="btn btn-primary float-end">
      Add task
    </a>
  </h1>
    {% if task_list %}
      <ul style="list-style: none">
      {% for task in task_list %}
        <li>
          {{ task.content }}
          {% if task.is_done %}
            <span style="color: green; font-weight: bold">Done</span>

            <a href="{% url 'todo_app:undo-task' task.id %}" class="btn btn-secondary float-end">Undo</a>
          {% else %}
            <span style="color: red; font-weight: bold">Not done</span>

            <a href="{% url 'todo_app:complete-task' task.id %}" class="btn btn-success float-end">Complete</a>
          {% endif %}
        </li>
        <li>Created: {{ task.created_at|date:"d.m.Y H:i:s" }}</li>
        <li>Tags:
          {% for tag in task.tags.all %}
            {{ tag.name }}
            {% if not forloop.last %}
              ,
            {% endif %}
          {% endfor %}
          <a href="{% url 'todo_app:task-update' pk=task.id %}" >
            Update
          </a>
          <a href="{% url 'todo_app:task-delete' pk=task.id %}" >
            Delete
          </a>
        </li>
        <hr>
      {% endfor %}
      </ul>
    {% endif %}
{% endblock %}
